stages:
  great_expectations:
    cmd: | 
      python3 src/gx_validation.py --csv london_weather.csv
    deps:
      - data/london_weather.csv
      - src/gx_validation.py
    outs:
      - output/metrics.json

  train_model:
    cmd: |
      python3 src/train_model.py --csv london_weather.csv --params '{"model__max_depth": [5], "model__n_estimators": [100]}'
    deps:
      - data/london_weather.csv
      - src/train_model.py
    outs:
      - output/model_metrics.json
      - output/model.pkl
